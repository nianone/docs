# 桌面环境配置

## 1.连接互联网

刚刚安装好的 Arch Linux 是没有连接互联网的，我们已经安装了网络管理器 NetworkManager，现在我们使用它连接互联网。[1]

```text
[root@xxxx ~]# nmcli device wifi list  # 列出可连接的 WiFi
[root@xxxx ~]# nmcli device wifi connect "SSID" password "密码"  # 连接 WiFi
```

校准时间
```text
设置
timedatectl
timedatectl set-timezone UTC
```

## 2.创建普通用户以及sudo设置

日常使用需要使用普通用户

```text
[root@xxxx ~]# useradd -m -G wheel 用户名  # 创建用户，并为其创建家目录，将其加入 wheel 组
[root@xxxx ~]# passwd 用户名  # 为新用户设置密码
New password:
Retype new password:
passwd: password updated successfully
```

sudo权限提升, 需要安装vi修改配置文件

```text
pacman -S sudo vi
visudo
-----------begen 将下面这行的注释去掉
%wheel ALL=(ALL:ALL) ALL
-----------end
```

切换用户

```text
su 新用户名
```

## 安装kde桌面 

请安装 plasma-meta 软件元包。为了提供 Wayland 支持，请安装 plasma-wayland-session 软件包。请安装 KDE 默认的文件管理器 dolphin 和终端模拟器 konsole 软件包。KDE 提供的其他应用程序，请见 Arch Linux - kde-applications (x86_64) - Group Details。为了获得中文字体，请安装 noto-fonts-cjk 软件包。

```text
pacman -S plasma-meta plasma-wayland-session dolphin konsole noto-fonts-cjk
```

安装过程中需要选择 jack 和 pipewire-session-manager 的提供者，请分别选择 pipewire-jack 和 wireplumber。其余选择默认选项。

安装完毕后，请激活 sddm.service。sddm 是 KDE Plasma 的显示管理器，用于登录帐号与启动桌面环境。

```text
systemctl enable sddm.service
# 重启即可进入系统
reboot
```

配置

由于 KDE 自带的文件索引程序 baloo 可能严重拖慢计算机性能，笔者建议您关闭 baloo。具体方法为

```text
balooctl suspend
balooctl disable
```


## 配置pacman

启用颜色显示和并行下载

```text
vim etc/pacman.conf
--------------------
Color
ParallelDownloads = 5
```

添加32位软件仓库

```text
vim etc/pacman.conf
--------------------
[multilib]
Include = /etc/pacman.d/mirrorlist
```

添加非官方软件仓库：在文件最后添加

```text
/etc/pacman.conf
----------------
[archlinuxcn]
Server = https://mirrors.bfsu.edu.cn/archlinuxcn/$arch
```
```text
sudo pacman -Syu
sudo pacman -Sy archlinux-keyring
sudo pacman -Sy archlinuxcn-keyring
sudo pacman-key --init
sudo pacman-key --populate
```

## 安装编译工具包

```text
sudo pacman -S base-devel
```


## 输入法以及中文配置

安装fcitx5，安装后需要重启

```text
sudo pacman -S fcitx5-im 
sudo pacman -S fcitx5-chinese-addons  fcitx5-rime
sudo vim /etc/environment
GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
SDL_IM_MODULE=fcitx
```

> 参考
>
> https://zhuanlan.zhihu.com/p/393746270
## 安装aur

需要先安装 编辑工具包

```text
sudo pacman -S yay
```

## 

## pacman安装zsh

pacman 安装

```text
sudo pacman -S zsh
```

查看安装位置

```text
which zsh
```

查看已有的shell

```text
chsh -l
```

设置zsh为默认shell

```text
chsh -s /bin/zsh
```

安装 oh-my-zsh 官方主页：https://ohmyz.sh/

```text
# clone 项目
git clone https://gitee.com/mirrors/oh-my-zsh.git
# 运行脚本
sh ~/oh-my-zsh/tools/install.sh
```

高亮显示插件 zsh-syntax-highlighting，为ZSH Shell提供语法高亮显示。

```text
zsh #运行zsh
cd $HOME/.oh-my-zsh/plugins
#下载代码
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git
#自动配置
echo "source ${(q-)PWD}/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" >> ${ZDOTDIR:-$HOME}/.zshrc
```

自动补全插件 zsh-autosuggestions

```text
cd $HOME/.oh-my-zsh/plugins
#下载代码
git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
```

```text
vim ~/.zshrc.oh-my-zsh
----------------------
plugins=(git)

plugins=(
    git
    zsh-autosuggestions
)
```

重新加载配置文件

```text
source $ZSH/oh-my-zsh.sh
```

> 参考：
> 
>https://zhuanlan.zhihu.com/p/350917930
>https://blog.csdn.net/lxyoucan/article/details/115279860


## neofetch

查看系统信息的装逼工具

```text
sudo pacman -S neofetch
```



## 声卡配置

```text
sudo pacman -S pipewire pipewire-pulse pipewire-alsa pipewire-jack
systemctl enable pipewire --user
systemctl enable pipewire-pulse --user

systemctl start pipewire --user
systemctl start pipewire-pulse --user

```

## 网卡配置

https://blog.csdn.net/to_free/article/details/121342385

## 蓝牙配置

可能需要安装的包，依旧连不上

```text
sudo pacman -S bluez bluez-utils 
sudo systemctl start bluetooth.service
sudo systemctl enable bluetooth.service
systemctl enable bluetooth
systemctl start bluetooth        

```

https://wiki.archlinuxcn.org/wiki/ALSA#%E8%A7%A3%E9%99%A4%E5%90%84%E5%A3%B0%E9%81%93%E7%9A%84%E9%9D%99%E9%9F%B3