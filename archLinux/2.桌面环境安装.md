# 桌面环境配置

## 1.连接互联网

刚刚安装好的 Arch Linux 是没有连接互联网的，我们已经安装了网络管理器 NetworkManager，现在我们使用它连接互联网。[1]

```text
[root@xxxx ~]# nmcli device wifi list  # 列出可连接的 WiFi
[root@xxxx ~]# nmcli device wifi connect "SSID" password "密码"  # 连接 WiFi
```

## 2.创建普通用户以及sudo设置

日常使用需要使用普通用户

```text
[root@xxxx ~]# useradd -m -G wheel 用户名  # 创建用户，并为其创建家目录，将其加入 wheel 组
[root@xxxx ~]# passwd 用户名  # 为新用户设置密码
New password:
Retype new password:
passwd: password updated successfully
```

sudo权限提升, 需要安装vi修改配置文件

```text
pacman -S sudo vi
visudo
-----------begen 将下面这行的注释去掉
%wheel ALL=(ALL:ALL) ALL
-----------end
```

切换用户

```text
su 新用户名
```

## 安装kde桌面 

请安装 plasma-meta 软件元包。为了提供 Wayland 支持，请安装 plasma-wayland-session 软件包。请安装 KDE 默认的文件管理器 dolphin 和终端模拟器 konsole 软件包。KDE 提供的其他应用程序，请见 Arch Linux - kde-applications (x86_64) - Group Details。为了获得中文字体，请安装 noto-fonts-cjk 软件包。

```text
pacman -S man-pages man-db #命令提示
pacman -S plasma-meta plasma-wayland-session dolphin konsole noto-fonts-cjk # 桌面环境
pacman -S mesa xf86-video-amdgpu vulkan-radeon # 显卡驱动
```

安装过程中需要选择 jack 和 pipewire-session-manager 的提供者，请分别选择 pipewire-jack 和 wireplumber。其余选择默认选项。

安装完毕后，请激活 sddm.service。sddm 是 KDE Plasma 的显示管理器，用于登录帐号与启动桌面环境。

```text
systemctl enable sddm.service
# 重启即可进入系统
reboot
```

配置

由于 KDE 自带的文件索引程序 baloo 可能严重拖慢计算机性能，笔者建议您关闭 baloo。具体方法为

```text
balooctl suspend
balooctl disable
```

## 输入法以及中文配置

安装fcitx5，安装后需要重启

```text
sudo pacman -S fcitx5-im fcitx5-chinese-addons  fcitx5-rime

# vim ~/.pam_environment
------------------begen 添加以下四行
INPUT_METHOD  DEFAULT=fcitx5
GTK_IM_MODULE DEFAULT=fcitx5
QT_IM_MODULE  DEFAULT=fcitx5
XMODIFIERS    DEFAULT=@im=fcitx5
------------------end
```

> 参考
>
> https://zhuanlan.zhihu.com/p/393746270